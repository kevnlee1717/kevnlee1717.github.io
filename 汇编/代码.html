<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>代码 | 读书笔记</title>
    <meta name="description" content="blog for important">
    <meta name="generator" content="VuePress 1.3.1">
    
    
    <link rel="preload" href="/assets/css/0.styles.6b1fcd0f.css" as="style"><link rel="preload" href="/assets/js/app.9eeb4c04.js" as="script"><link rel="preload" href="/assets/js/2.05f5c699.js" as="script"><link rel="preload" href="/assets/js/78.de45f505.js" as="script"><link rel="prefetch" href="/assets/js/10.ce5629fc.js"><link rel="prefetch" href="/assets/js/11.9773dffd.js"><link rel="prefetch" href="/assets/js/12.cb235449.js"><link rel="prefetch" href="/assets/js/13.838af8c1.js"><link rel="prefetch" href="/assets/js/14.0f78d55e.js"><link rel="prefetch" href="/assets/js/15.7b28f3cf.js"><link rel="prefetch" href="/assets/js/16.bd9e6d20.js"><link rel="prefetch" href="/assets/js/17.d8687edf.js"><link rel="prefetch" href="/assets/js/18.306806ea.js"><link rel="prefetch" href="/assets/js/19.ab35d666.js"><link rel="prefetch" href="/assets/js/20.d0795bc0.js"><link rel="prefetch" href="/assets/js/21.4528c5b9.js"><link rel="prefetch" href="/assets/js/22.d2153363.js"><link rel="prefetch" href="/assets/js/23.d7c71f27.js"><link rel="prefetch" href="/assets/js/24.a9e1c254.js"><link rel="prefetch" href="/assets/js/25.15696c77.js"><link rel="prefetch" href="/assets/js/26.4bbfc20d.js"><link rel="prefetch" href="/assets/js/27.1a8b8d41.js"><link rel="prefetch" href="/assets/js/28.81f62634.js"><link rel="prefetch" href="/assets/js/29.15767945.js"><link rel="prefetch" href="/assets/js/3.512ca8e1.js"><link rel="prefetch" href="/assets/js/30.e956e5bf.js"><link rel="prefetch" href="/assets/js/31.c9fa876d.js"><link rel="prefetch" href="/assets/js/32.79554d08.js"><link rel="prefetch" href="/assets/js/33.a6cfbf61.js"><link rel="prefetch" href="/assets/js/34.b6f8901e.js"><link rel="prefetch" href="/assets/js/35.ab673e8f.js"><link rel="prefetch" href="/assets/js/36.f5ee7dc3.js"><link rel="prefetch" href="/assets/js/37.40e0320b.js"><link rel="prefetch" href="/assets/js/38.6cb6a27b.js"><link rel="prefetch" href="/assets/js/39.ff4a30ed.js"><link rel="prefetch" href="/assets/js/4.00b5f0c7.js"><link rel="prefetch" href="/assets/js/40.478ea2a9.js"><link rel="prefetch" href="/assets/js/41.64fdc8de.js"><link rel="prefetch" href="/assets/js/42.514e254b.js"><link rel="prefetch" href="/assets/js/43.e2c263a3.js"><link rel="prefetch" href="/assets/js/44.e01d7fb4.js"><link rel="prefetch" href="/assets/js/45.a2fddd2d.js"><link rel="prefetch" href="/assets/js/46.8282db21.js"><link rel="prefetch" href="/assets/js/47.a7e1170f.js"><link rel="prefetch" href="/assets/js/48.fe61ca73.js"><link rel="prefetch" href="/assets/js/49.34cbcda0.js"><link rel="prefetch" href="/assets/js/5.59abda55.js"><link rel="prefetch" href="/assets/js/50.38e400ea.js"><link rel="prefetch" href="/assets/js/51.03cc45e4.js"><link rel="prefetch" href="/assets/js/52.f133d9c7.js"><link rel="prefetch" href="/assets/js/53.ada00766.js"><link rel="prefetch" href="/assets/js/54.24a05a9c.js"><link rel="prefetch" href="/assets/js/55.204b6e5c.js"><link rel="prefetch" href="/assets/js/56.13a2207f.js"><link rel="prefetch" href="/assets/js/57.a252ceca.js"><link rel="prefetch" href="/assets/js/58.315067a8.js"><link rel="prefetch" href="/assets/js/59.0026ba95.js"><link rel="prefetch" href="/assets/js/6.fccdfb42.js"><link rel="prefetch" href="/assets/js/60.30c08c7c.js"><link rel="prefetch" href="/assets/js/61.87d9ca75.js"><link rel="prefetch" href="/assets/js/62.30b4fffc.js"><link rel="prefetch" href="/assets/js/63.44cd0bb8.js"><link rel="prefetch" href="/assets/js/64.29caf405.js"><link rel="prefetch" href="/assets/js/65.5280d5cd.js"><link rel="prefetch" href="/assets/js/66.c1aa3043.js"><link rel="prefetch" href="/assets/js/67.7baea68b.js"><link rel="prefetch" href="/assets/js/68.d202f339.js"><link rel="prefetch" href="/assets/js/69.9b34bf67.js"><link rel="prefetch" href="/assets/js/7.1753504c.js"><link rel="prefetch" href="/assets/js/70.0569eace.js"><link rel="prefetch" href="/assets/js/71.464aeeb3.js"><link rel="prefetch" href="/assets/js/72.b7ec61d5.js"><link rel="prefetch" href="/assets/js/73.afd82e65.js"><link rel="prefetch" href="/assets/js/74.6bf26649.js"><link rel="prefetch" href="/assets/js/75.97d4b5c5.js"><link rel="prefetch" href="/assets/js/76.ae4be9dc.js"><link rel="prefetch" href="/assets/js/77.0236f6e7.js"><link rel="prefetch" href="/assets/js/79.74474488.js"><link rel="prefetch" href="/assets/js/8.7d851339.js"><link rel="prefetch" href="/assets/js/80.5c82a395.js"><link rel="prefetch" href="/assets/js/81.310b0fe4.js"><link rel="prefetch" href="/assets/js/82.11228b74.js"><link rel="prefetch" href="/assets/js/83.2c92d02f.js"><link rel="prefetch" href="/assets/js/84.b1209e24.js"><link rel="prefetch" href="/assets/js/9.e24e4f73.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6b1fcd0f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">读书笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/uni-app/" class="nav-link">
  uni
</a></div><div class="nav-item"><a href="/es6/" class="nav-link">
  es6
</a></div><div class="nav-item"><a href="/python/" class="nav-link">
  py
</a></div><div class="nav-item"><a href="/tp5/" class="nav-link">
  tp5
</a></div><div class="nav-item"><a href="/docker/" class="nav-link">
  dock
</a></div><div class="nav-item"><a href="/face/" class="nav-link">
  face
</a></div><div class="nav-item"><a href="/android/" class="nav-link">
  android
</a></div><div class="nav-item"><a href="/csharp/" class="nav-link">
  csharp
</a></div><div class="nav-item"><a href="/c++/" class="nav-link">
  c++
</a></div><div class="nav-item"><a href="/arm/" class="nav-link">
  arm
</a></div><div class="nav-item"><a href="/wechat/" class="nav-link">
  wechat
</a></div><div class="nav-item"><a href="/汇编/" class="nav-link">
  汇编
</a></div><div class="nav-item"><a href="/unix/" class="nav-link">
  unix
</a></div><div class="nav-item"><a href="/资源/" class="nav-link">
  资源
</a></div><div class="nav-item"><a href="/摄影/" class="nav-link">
  摄影
</a></div><div class="nav-item"><a href="/加密币/" class="nav-link">
  加密币
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/uni-app/" class="nav-link">
  uni
</a></div><div class="nav-item"><a href="/es6/" class="nav-link">
  es6
</a></div><div class="nav-item"><a href="/python/" class="nav-link">
  py
</a></div><div class="nav-item"><a href="/tp5/" class="nav-link">
  tp5
</a></div><div class="nav-item"><a href="/docker/" class="nav-link">
  dock
</a></div><div class="nav-item"><a href="/face/" class="nav-link">
  face
</a></div><div class="nav-item"><a href="/android/" class="nav-link">
  android
</a></div><div class="nav-item"><a href="/csharp/" class="nav-link">
  csharp
</a></div><div class="nav-item"><a href="/c++/" class="nav-link">
  c++
</a></div><div class="nav-item"><a href="/arm/" class="nav-link">
  arm
</a></div><div class="nav-item"><a href="/wechat/" class="nav-link">
  wechat
</a></div><div class="nav-item"><a href="/汇编/" class="nav-link">
  汇编
</a></div><div class="nav-item"><a href="/unix/" class="nav-link">
  unix
</a></div><div class="nav-item"><a href="/资源/" class="nav-link">
  资源
</a></div><div class="nav-item"><a href="/摄影/" class="nav-link">
  摄影
</a></div><div class="nav-item"><a href="/加密币/" class="nav-link">
  加密币
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/%E6%B1%87%E7%BC%96/" class="sidebar-link">汇编</a></li><li><a href="/汇编/代码.html" class="active sidebar-link">代码</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/汇编/代码.html#dword-word-byte-ptr-寻址" class="sidebar-link">dword/word/byte ptr 寻址</a></li><li class="sidebar-sub-header"><a href="/汇编/代码.html#jz-jne" class="sidebar-link">jz jne</a></li><li class="sidebar-sub-header"><a href="/汇编/代码.html#jmp-goto" class="sidebar-link">jmp goto</a></li><li class="sidebar-sub-header"><a href="/汇编/代码.html#jmp-goto-汇编实现" class="sidebar-link">jmp goto 汇编实现</a></li><li class="sidebar-sub-header"><a href="/汇编/代码.html#switch-普通" class="sidebar-link">switch 普通</a></li><li class="sidebar-sub-header"><a href="/汇编/代码.html#switch-跳转表" class="sidebar-link">switch 跳转表</a></li></ul></li><li><a href="/汇编/寄存器.html" class="sidebar-link">寄存器</a></li><li><a href="/汇编/编译器.html" class="sidebar-link">编译器</a></li><li><a href="/汇编/DOSBOX.html" class="sidebar-link">dosbox</a></li><li><a href="/汇编/OllyDbg.html" class="sidebar-link">OllyDbg</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="代码"><a href="#代码" class="header-anchor">#</a> 代码</h1> <h2 id="dword-word-byte-ptr-寻址"><a href="#dword-word-byte-ptr-寻址" class="header-anchor">#</a> dword/word/byte ptr 寻址</h2> <p>定义了 三种数据类型  dword, short/word, byte</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;cstdio&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;Windows.h&gt;</span></span>


<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	DWORD iEAX<span class="token punctuation">;</span>
	SHORT iAX<span class="token punctuation">;</span>
	<span class="token keyword">char</span>  iAH<span class="token punctuation">;</span>

	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;iEAX iAX iAH&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	__asm<span class="token punctuation">{</span>
		mov iEAX<span class="token punctuation">,</span> <span class="token number">0x55667788</span><span class="token punctuation">;</span>  <span class="token comment">//eax 是双字 55667788全部保存</span>
		mov iAX<span class="token punctuation">,</span> <span class="token number">0x55667788</span><span class="token punctuation">;</span>   <span class="token comment">//ax 是单字 只能保存 7788</span>
		mov iAH<span class="token punctuation">,</span> <span class="token number">0x55667788</span><span class="token punctuation">;</span>   <span class="token comment">//ah 是单字节 只能保存88</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>编译器根据数据的类型会对 0x55667788 自动进行截断</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>
<span class="token number">01361011</span>  <span class="token operator">|</span><span class="token punctuation">.</span>  <span class="token number">83</span>C4 <span class="token number">04</span>       add esp<span class="token punctuation">,</span><span class="token number">0x4</span>
<span class="token number">01361014</span>  <span class="token operator">|</span><span class="token punctuation">.</span>  C745 F4 <span class="token number">88776</span><span class="token operator">&gt;</span>mov <span class="token punctuation">[</span>local<span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">0x55667788</span>
<span class="token number">0136101</span>B  <span class="token operator">|</span><span class="token punctuation">.</span>  <span class="token number">66</span><span class="token operator">:</span>C745 FC <span class="token number">88</span><span class="token operator">&gt;</span>mov word ptr ss<span class="token operator">:</span><span class="token punctuation">[</span>ebp<span class="token operator">-</span><span class="token number">0x4</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">0x7788</span>
<span class="token number">01361021</span>  <span class="token operator">|</span><span class="token punctuation">.</span>  C645 FB <span class="token number">88</span>    mov byte ptr ss<span class="token operator">:</span><span class="token punctuation">[</span>ebp<span class="token operator">-</span><span class="token number">0x5</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">0x88</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>栈中的数据</p> <div class="language-ini line-numbers-mode"><pre class="language-ini"><code>
0039F904   55667788  //只保存了55667788
0039F908   8836302C  //只保存了88
0039F90C   73CC7788  //只保存了 7788

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="jz-jne"><a href="#jz-jne" class="header-anchor">#</a> jz jne</h2> <div class="language-c line-numbers-mode"><pre class="language-c"><code>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;cstdio&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;Windows.h&gt;</span></span>


<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot; jz je \n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;a == 2\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;a == 3\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><div class="language-nasm line-numbers-mode"><pre class="language-nasm"><code>

<span class="token number">01291012</span>  <span class="token operator">|</span>.  C745 FC <span class="token number">02000</span><span class="token operator">&gt;</span>mov <span class="token operator">[</span>local<span class="token number">.1</span><span class="token operator">]</span>,<span class="token number">0x2</span>						<span class="token comment">;  a = 2</span>
<span class="token number">01291019</span>  <span class="token operator">|</span>.  <span class="token number">837D</span> FC <span class="token number">02</span>    cmp <span class="token operator">[</span>local<span class="token number">.1</span><span class="token operator">]</span>,<span class="token number">0x2</span>						<span class="token comment">; a == 2?</span>
<span class="token number">0129101D</span>  <span class="token operator">|</span>.  <span class="token number">75</span> <span class="token number">10</span>         jnz short rasm.0129102F                 <span class="token comment">; a !=2 jmp</span>
0129101F  <span class="token operator">|</span>.  <span class="token number">68</span> <span class="token number">00212901</span>   push rasm<span class="token number">.01292100</span>                       <span class="token comment">; push print argument 'a == 2'</span>
&quot;
<span class="token number">01291024</span>  <span class="token operator">|</span>.  FF15 A4202901 call dword ptr <span class="token register variable">ds</span>:<span class="token operator">[</span><span class="token operator">&lt;</span><span class="token operator">&amp;</span>MSVCR100.printf<span class="token operator">&gt;</span><span class="token operator">]</span>   <span class="token comment">; printf a == 2</span>
0129102A  <span class="token operator">|</span>.  83C4 <span class="token number">04</span>       add <span class="token register variable">esp</span>,<span class="token number">0x4</span>
<span class="token number">0129102D</span>  <span class="token operator">|</span>.  EB 0E         jmp short rasm<span class="token number">.0129103D</span>                  <span class="token comment">; 跳过else语句 直接到getchar（）</span>
0129102F  <span class="token operator">|</span><span class="token operator">&gt;</span>  <span class="token number">68</span> <span class="token number">08212901</span>   push rasm<span class="token number">.01292108</span>                       <span class="token comment">; push print argument 'a == 3'</span>
&quot;
<span class="token number">01291034</span>  <span class="token operator">|</span>.  FF15 A4202901 call dword ptr <span class="token register variable">ds</span>:<span class="token operator">[</span><span class="token operator">&lt;</span><span class="token operator">&amp;</span>MSVCR100.printf<span class="token operator">&gt;</span><span class="token operator">]</span>   <span class="token comment">; printf a == 3</span>
0129103A  <span class="token operator">|</span>.  83C4 <span class="token number">04</span>       add <span class="token register variable">esp</span>,<span class="token number">0x4</span>
<span class="token number">0129103D</span>  <span class="token operator">|</span><span class="token operator">&gt;</span>  FF15 9C202901 call dword ptr <span class="token register variable">ds</span>:<span class="token operator">[</span><span class="token operator">&lt;</span><span class="token operator">&amp;</span>MSVCR100.getchar<span class="token operator">&gt;</span><span class="token operator">]</span>  <span class="token comment">; getchar()</span>




</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="jmp-goto"><a href="#jmp-goto" class="header-anchor">#</a> jmp goto</h2> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;cstdio&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;Windows.h&gt;</span></span>


<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot; go \n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	printf <span class="token punctuation">(</span><span class="token string">&quot;start goto\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">goto</span> end<span class="token punctuation">;</span>

	printf <span class="token punctuation">(</span><span class="token string">&quot;do some thins 1\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	printf <span class="token punctuation">(</span><span class="token string">&quot;do some thins 2\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
end<span class="token operator">:</span> 
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;end here\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


	<span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><div class="language-nasm line-numbers-mode"><pre class="language-nasm"><code>00CE1003   .  <span class="token number">68</span> F420CE00   push rasm.00CE20F4                       <span class="token comment">; /format = &quot; go </span>
&quot;
00CE1008   .  FF15 A420CE00 call dword ptr <span class="token register variable">ds</span>:<span class="token operator">[</span><span class="token operator">&lt;</span><span class="token operator">&amp;</span>MSVCR100.printf<span class="token operator">&gt;</span><span class="token operator">]</span>   <span class="token comment">; \printf</span>
00CE100E   .  83C4 <span class="token number">04</span>       add <span class="token register variable">esp</span>,<span class="token number">0x4</span>
00CE1011   .  <span class="token number">68</span> FC20CE00   push rasm.00CE20FC                       <span class="token comment">; /format = &quot;start goto</span>
&quot;
00CE1016   .  FF15 A420CE00 call dword ptr <span class="token register variable">ds</span>:<span class="token operator">[</span><span class="token operator">&lt;</span><span class="token operator">&amp;</span>MSVCR100.printf<span class="token operator">&gt;</span><span class="token operator">]</span>   <span class="token comment">; \printf</span>
00CE101C   .  83C4 <span class="token number">04</span>       add <span class="token register variable">esp</span>,<span class="token number">0x4</span>
00CE101F   .  EB 1E         jmp short rasm.00CE103F					<span class="token comment">;无条件转移 ，这里翻译了两条是编译器的问题</span>
00CE1021   .  EB 1C         jmp short rasm.00CE103F
00CE1023   .  <span class="token number">68</span> 0821CE00   push rasm.00CE2108                       <span class="token comment">; /format = &quot;do some thins 1</span>
&quot;
00CE1028   .  FF15 A420CE00 call dword ptr <span class="token register variable">ds</span>:<span class="token operator">[</span><span class="token operator">&lt;</span><span class="token operator">&amp;</span>MSVCR100.printf<span class="token operator">&gt;</span><span class="token operator">]</span>   <span class="token comment">; \printf</span>
00CE102E   .  83C4 <span class="token number">04</span>       add <span class="token register variable">esp</span>,<span class="token number">0x4</span>
00CE1031   .  <span class="token number">68</span> 1C21CE00   push rasm.00CE211C                       <span class="token comment">; /format = &quot;do some thins 2</span>
&quot;
00CE1036   .  FF15 A420CE00 call dword ptr <span class="token register variable">ds</span>:<span class="token operator">[</span><span class="token operator">&lt;</span><span class="token operator">&amp;</span>MSVCR100.printf<span class="token operator">&gt;</span><span class="token operator">]</span>   <span class="token comment">; \printf</span>
00CE103C   .  83C4 <span class="token number">04</span>       add <span class="token register variable">esp</span>,<span class="token number">0x4</span>
00CE103F   <span class="token operator">&gt;</span>  <span class="token number">68</span> 3021CE00   push rasm.00CE2130                       <span class="token comment">; /format = &quot;end here</span>
&quot;
00CE1044   .  FF15 A420CE00 call dword ptr <span class="token register variable">ds</span>:<span class="token operator">[</span><span class="token operator">&lt;</span><span class="token operator">&amp;</span>MSVCR100.printf<span class="token operator">&gt;</span><span class="token operator">]</span>   <span class="token comment">; \printf</span>
00CE104A   .  83C4 <span class="token number">04</span>       add <span class="token register variable">esp</span>,<span class="token number">0x4</span>
00CE104D   .  FF15 9C20CE00 call dword ptr <span class="token register variable">ds</span>:<span class="token operator">[</span><span class="token operator">&lt;</span><span class="token operator">&amp;</span>MSVCR100.getchar<span class="token operator">&gt;</span><span class="token operator">]</span>  <span class="token comment">; [getchar</span>



</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="jmp-goto-汇编实现"><a href="#jmp-goto-汇编实现" class="header-anchor">#</a> jmp goto 汇编实现</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>写代码的时候 （jmp 寄存器） 不可以是 (jmp 立即数)， 所以先 （mov eax，地址） 然后 （jmp eax）。 这里地址有时候没办法只能用硬编码，一般字节写的时候 用上地址的标识符。</p></div> <div class="language-c line-numbers-mode"><pre class="language-c"><code>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;cstdio&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;Windows.h&gt;</span></span>


<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot; go \n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	printf <span class="token punctuation">(</span><span class="token string">&quot;start goto\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	__asm<span class="token punctuation">{</span>
		mov eax<span class="token punctuation">,</span> end <span class="token comment">//这里用上地址标识符，</span>
		<span class="token comment">//有时候地址要用硬编码 0x12345678</span>

        jmp eax
	<span class="token punctuation">}</span>

	printf <span class="token punctuation">(</span><span class="token string">&quot;do some thins 1\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	printf <span class="token punctuation">(</span><span class="token string">&quot;do some thins 2\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
end<span class="token operator">:</span> 
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;end here\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	__asm jmp end

	<span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><div class="language-nasm line-numbers-mode"><pre class="language-nasm"><code>00EC1000 <span class="token operator">&gt;</span> <span class="token operator">$</span>  <span class="token number">55</span>            push <span class="token register variable">ebp</span>
00EC1001   .  8BEC          mov <span class="token register variable">ebp</span>,<span class="token register variable">esp</span>
00EC1003   .  <span class="token number">68</span> F420EC00   push rasm.00EC20F4                       <span class="token comment">; /format = &quot; go </span>
&quot;
00EC1008   .  FF15 A420EC00 call dword ptr <span class="token register variable">ds</span>:<span class="token operator">[</span><span class="token operator">&lt;</span><span class="token operator">&amp;</span>MSVCR100.printf<span class="token operator">&gt;</span><span class="token operator">]</span>   <span class="token comment">; \printf</span>
00EC100E   .  83C4 <span class="token number">04</span>       add <span class="token register variable">esp</span>,<span class="token number">0x4</span>
00EC1011   .  <span class="token number">68</span> FC20EC00   push rasm.00EC20FC                       <span class="token comment">; /format = &quot;start goto</span>
&quot;
00EC1016   .  FF15 A420EC00 call dword ptr <span class="token register variable">ds</span>:<span class="token operator">[</span><span class="token operator">&lt;</span><span class="token operator">&amp;</span>MSVCR100.printf<span class="token operator">&gt;</span><span class="token operator">]</span>   <span class="token comment">; \printf</span>
00EC101C   .  83C4 <span class="token number">04</span>       add <span class="token register variable">esp</span>,<span class="token number">0x4</span>
00EC101F   .  B8 4210EC00   mov <span class="token register variable">eax</span>,rasm.00EC1042
00EC1024   .<span class="token operator">-</span> FFE0          jmp <span class="token register variable">eax</span>
00EC1026   .  <span class="token number">68</span> 0821EC00   push rasm.00EC2108                       <span class="token comment">; /format = &quot;do some thins 1</span>
&quot;
00EC102B   .  FF15 A420EC00 call dword ptr <span class="token register variable">ds</span>:<span class="token operator">[</span><span class="token operator">&lt;</span><span class="token operator">&amp;</span>MSVCR100.printf<span class="token operator">&gt;</span><span class="token operator">]</span>   <span class="token comment">; \printf</span>
00EC1031   .  83C4 <span class="token number">04</span>       add <span class="token register variable">esp</span>,<span class="token number">0x4</span>
00EC1034   .  <span class="token number">68</span> 1C21EC00   push rasm.00EC211C                       <span class="token comment">; /format = &quot;do some thins 2</span>
&quot;
00EC1039   .  FF15 A420EC00 call dword ptr <span class="token register variable">ds</span>:<span class="token operator">[</span><span class="token operator">&lt;</span><span class="token operator">&amp;</span>MSVCR100.printf<span class="token operator">&gt;</span><span class="token operator">]</span>   <span class="token comment">; \printf</span>
00EC103F   .  83C4 <span class="token number">04</span>       add <span class="token register variable">esp</span>,<span class="token number">0x4</span>
00EC1042   <span class="token operator">&gt;</span>  <span class="token number">68</span> 3021EC00   push rasm.00EC2130                       <span class="token comment">; /format = &quot;end here</span>
&quot;
00EC1047   .  FF15 A420EC00 call dword ptr <span class="token register variable">ds</span>:<span class="token operator">[</span><span class="token operator">&lt;</span><span class="token operator">&amp;</span>MSVCR100.printf<span class="token operator">&gt;</span><span class="token operator">]</span>   <span class="token comment">; \printf</span>
00EC104D   .  83C4 <span class="token number">04</span>       add <span class="token register variable">esp</span>,<span class="token number">0x4</span>
00EC1050   .^ EB F0         jmp short rasm.00EC1042
00EC1052      FF            db FF
00EC1053      <span class="token number">15</span>            db <span class="token number">15</span>
00EC1054   .  9C20EC00      dd <span class="token operator">&lt;</span><span class="token operator">&amp;</span>MSVCR100.getchar<span class="token operator">&gt;</span>



</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="switch-普通"><a href="#switch-普通" class="header-anchor">#</a> switch 普通</h2> <div class="language-c line-numbers-mode"><pre class="language-c"><code>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;cstdio&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;Windows.h&gt;</span></span>



<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot; switch \n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

	<span class="token keyword">switch</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">{</span>

	<span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;1 \n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>

		
	<span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;2 \n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>


	<span class="token keyword">default</span><span class="token operator">:</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;default \n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;end\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><div class="language-nasm line-numbers-mode"><pre class="language-nasm"><code>


<span class="token number">003E1014</span>   .  C745 FC <span class="token number">01000</span><span class="token operator">&gt;</span>mov dword ptr <span class="token register variable">ss</span>:<span class="token operator">[</span><span class="token register variable">ebp</span><span class="token operator">-</span><span class="token number">0x4</span><span class="token operator">]</span>,<span class="token number">0x1</span>           <span class="token comment">;  a=1</span>
003E101B   .  8B45 FC       mov <span class="token register variable">eax</span>,dword ptr <span class="token register variable">ss</span>:<span class="token operator">[</span><span class="token register variable">ebp</span><span class="token operator">-</span><span class="token number">0x4</span><span class="token operator">]</span>           <span class="token comment">;  eax=1</span>
003E101E   .  <span class="token number">8945</span> F8       mov dword ptr <span class="token register variable">ss</span>:<span class="token operator">[</span><span class="token register variable">ebp</span><span class="token operator">-</span><span class="token number">0x8</span><span class="token operator">]</span>,<span class="token register variable">eax</span>           <span class="token comment">;  switch(a) a做为一个参数在ebp-0x8</span>
<span class="token number">003E1021</span>   .  <span class="token number">837D</span> F8 <span class="token number">01</span>    cmp dword ptr <span class="token register variable">ss</span>:<span class="token operator">[</span><span class="token register variable">ebp</span><span class="token operator">-</span><span class="token number">0x8</span><span class="token operator">]</span>,<span class="token number">0x1</span>           <span class="token comment">;  sa == 1?</span>
<span class="token number">003E1025</span>   .  <span class="token number">74</span> <span class="token number">08</span>         je short rasm.003E102F                   <span class="token comment">;  ==1 jmp到print 1</span>
<span class="token number">003E1027</span>   .  <span class="token number">837D</span> F8 <span class="token number">02</span>    cmp dword ptr <span class="token register variable">ss</span>:<span class="token operator">[</span><span class="token register variable">ebp</span><span class="token operator">-</span><span class="token number">0x8</span><span class="token operator">]</span>,<span class="token number">0x2</span>           <span class="token comment">;  sa == 2?</span>
003E102B   .  <span class="token number">74</span> <span class="token number">12</span>         je short rasm.003E103F                   <span class="token comment">;  ==2 jmp print 2</span>
<span class="token number">003E102D</span>   .  EB <span class="token number">20</span>         jmp short rasm.003E104F                  <span class="token comment">;  !=1 &amp;&amp; != 2 jmp to default</span>
003E102F   <span class="token operator">&gt;</span>  <span class="token number">68</span> <span class="token number">00213E00</span>   push rasm<span class="token number">.003E2100</span>                       <span class="token comment">; /format = &quot;1 </span>
&quot;
<span class="token number">003E1034</span>   .  FF15 A4203E00 call dword ptr <span class="token register variable">ds</span>:<span class="token operator">[</span><span class="token operator">&lt;</span><span class="token operator">&amp;</span>MSVCR100.printf<span class="token operator">&gt;</span><span class="token operator">]</span>   <span class="token comment">; \printf</span>
003E103A   .  83C4 <span class="token number">04</span>       add <span class="token register variable">esp</span>,<span class="token number">0x4</span>
<span class="token number">003E103D</span>   .  EB 1E         jmp short rasm<span class="token number">.003E105D</span>                  <span class="token comment">;  after print  1 jmp to end</span>
003E103F   <span class="token operator">&gt;</span>  <span class="token number">68</span> <span class="token number">04213E00</span>   push rasm<span class="token number">.003E2104</span>                       <span class="token comment">; /format = &quot;2 </span>
&quot;
<span class="token number">003E1044</span>   .  FF15 A4203E00 call dword ptr <span class="token register variable">ds</span>:<span class="token operator">[</span><span class="token operator">&lt;</span><span class="token operator">&amp;</span>MSVCR100.printf<span class="token operator">&gt;</span><span class="token operator">]</span>   <span class="token comment">; \printf</span>
003E104A   .  83C4 <span class="token number">04</span>       add <span class="token register variable">esp</span>,<span class="token number">0x4</span>
<span class="token number">003E104D</span>   .  EB 0E         jmp short rasm<span class="token number">.003E105D</span>                  <span class="token comment">;  after print 2 jmp to end</span>
003E104F   <span class="token operator">&gt;</span>  <span class="token number">68</span> <span class="token number">08213E00</span>   push rasm<span class="token number">.003E2108</span>                       <span class="token comment">; /format = &quot;default </span>
&quot;
<span class="token number">003E1054</span>   .  FF15 A4203E00 call dword ptr <span class="token register variable">ds</span>:<span class="token operator">[</span><span class="token operator">&lt;</span><span class="token operator">&amp;</span>MSVCR100.printf<span class="token operator">&gt;</span><span class="token operator">]</span>   <span class="token comment">; \printf</span>
003E105A   .  83C4 <span class="token number">04</span>       add <span class="token register variable">esp</span>,<span class="token number">0x4</span>
<span class="token number">003E105D</span>   <span class="token operator">&gt;</span>  <span class="token number">68</span> <span class="token number">14213E00</span>   push rasm<span class="token number">.003E2114</span>                       <span class="token comment">;  ASCII &quot;end\n&quot;</span>



</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h2 id="switch-跳转表"><a href="#switch-跳转表" class="header-anchor">#</a> switch 跳转表</h2> <div class="language-c line-numbers-mode"><pre class="language-c"><code>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;cstdio&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;Windows.h&gt;</span></span>



<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot; switch \n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">0x20</span><span class="token punctuation">;</span>

	<span class="token keyword">switch</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">{</span>


	<span class="token comment">//11 13 15 17 18 20 21</span>
	<span class="token keyword">case</span> <span class="token number">0x13</span><span class="token operator">:</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;0x13 \n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>

		
	<span class="token keyword">case</span> <span class="token number">0x11</span><span class="token operator">:</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;0x11 \n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>


			<span class="token keyword">case</span> <span class="token number">0x15</span><span class="token operator">:</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;0x15 \n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>


			<span class="token keyword">case</span> <span class="token number">0x20</span><span class="token operator">:</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;0x20 \n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>

			<span class="token keyword">case</span> <span class="token number">0x21</span><span class="token operator">:</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;0x21 \n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>

			<span class="token keyword">case</span> <span class="token number">0x17</span><span class="token operator">:</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;0x17 \n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>

			<span class="token keyword">case</span> <span class="token number">0x18</span><span class="token operator">:</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;0x18 \n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>


	<span class="token keyword">default</span><span class="token operator">:</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;default \n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;end\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div><div class="language-nasm line-numbers-mode"><pre class="language-nasm"><code><span class="token comment">; 0x11 到 0x21 的偏移是 0x10, 先把switch的值减去最小的 0x11 获得偏移量，如果偏移量大于0x10就跳转到default</span>
<span class="token comment">;不然就在偏移索引表里找对应的偏移，因为0x11到0x21并不是每个值都有switch语句对应，没有对应的就跳转到地址表里的default函数索引，</span>
<span class="token comment">;default函数一般都在地址表最后一个，这里就是0x7就是第8个函数</span>

<span class="token number">012E1014</span>   .  C745 FC <span class="token number">20000</span><span class="token operator">&gt;</span>mov dword ptr <span class="token register variable">ss</span>:<span class="token operator">[</span><span class="token register variable">ebp</span><span class="token operator">-</span><span class="token number">0x4</span><span class="token operator">]</span>,<span class="token number">0x20</span>          <span class="token comment">;  a = 0x20</span>
012E101B   .  8B45 FC       mov <span class="token register variable">eax</span>,dword ptr <span class="token register variable">ss</span>:<span class="token operator">[</span><span class="token register variable">ebp</span><span class="token operator">-</span><span class="token number">0x4</span><span class="token operator">]</span>           <span class="token comment">;  eax = 0x20</span>
012E101E   .  <span class="token number">8945</span> F8       mov dword ptr <span class="token register variable">ss</span>:<span class="token operator">[</span><span class="token register variable">ebp</span><span class="token operator">-</span><span class="token number">0x8</span><span class="token operator">]</span>,<span class="token register variable">eax</span>           <span class="token comment">;  switch(a) a做为一个参数在ebp-0x8</span>
<span class="token number">012E1021</span>   .  8B4D F8       mov <span class="token register variable">ecx</span>,dword ptr <span class="token register variable">ss</span>:<span class="token operator">[</span><span class="token register variable">ebp</span><span class="token operator">-</span><span class="token number">0x8</span><span class="token operator">]</span>           <span class="token comment">;  ecx = temp = 0x20</span>
<span class="token number">012E1024</span>   .  <span class="token number">83E9</span> <span class="token number">11</span>       sub <span class="token register variable">ecx</span>,<span class="token number">0x11</span>                             <span class="token comment">;  ecx=ecx-0x11=0x20-0x11=f 减掉最小的值就是位移</span>
<span class="token number">012E1027</span>   .  <span class="token number">894D</span> F8       mov dword ptr <span class="token register variable">ss</span>:<span class="token operator">[</span><span class="token register variable">ebp</span><span class="token operator">-</span><span class="token number">0x8</span><span class="token operator">]</span>,<span class="token register variable">ecx</span>           <span class="token comment">;  temp = f 位移保存在temp里</span>
012E102A   .  <span class="token number">837D</span> F8 <span class="token number">10</span>    cmp dword ptr <span class="token register variable">ss</span>:<span class="token operator">[</span><span class="token register variable">ebp</span><span class="token operator">-</span><span class="token number">0x8</span><span class="token operator">]</span>,<span class="token number">0x10</span>          <span class="token comment">;  最大值21减去最小值11位移空间为0x10</span>
012E102E   .  0F87 <span class="token number">81000000</span> ja rasm.012E10B5                         <span class="token comment">;  所有大于这个0x10位移的都进default</span>
<span class="token number">012E1034</span>   .  8B55 F8       mov <span class="token register variable">edx</span>,dword ptr <span class="token register variable">ss</span>:<span class="token operator">[</span><span class="token register variable">ebp</span><span class="token operator">-</span><span class="token number">0x8</span><span class="token operator">]</span>           <span class="token comment">;  edx=temp=f 位移</span>
<span class="token number">012E1037</span>   .  0FB682 00112E<span class="token operator">&gt;</span>movzx <span class="token register variable">eax</span>,byte ptr <span class="token register variable">ds</span>:<span class="token operator">[</span><span class="token register variable">edx</span><span class="token operator">+</span><span class="token number">0x12E1100</span><span class="token operator">]</span>    <span class="token comment">;  eax=05地址索引,12e1100是一个函数地址表(12e10e0)的索引,11到21中有switch语句的跳转到地址表中的一个索引,没有的跳转到地址表中有一个default的索引</span>
012E103E   .<span class="token operator">-</span> FF2485 E0102E<span class="token operator">&gt;</span>jmp dword ptr <span class="token register variable">ds</span>:<span class="token operator">[</span><span class="token register variable">eax</span><span class="token operator">*</span><span class="token number">4</span><span class="token operator">+</span><span class="token number">0x12E10E0</span><span class="token operator">]</span>       <span class="token comment">;  根据[05*4 + 012e10eo]获取到函数地址入口.进行switch</span>



<span class="token comment">;偏移索引表</span>
<span class="token number">012E1100</span>  <span class="token number">00</span> <span class="token number">07</span> <span class="token number">01</span> <span class="token number">07</span> <span class="token number">02</span> <span class="token number">07</span> <span class="token number">03</span> <span class="token number">04</span> <span class="token number">07</span> <span class="token number">07</span> <span class="token number">07</span> <span class="token number">07</span> <span class="token number">07</span> <span class="token number">07</span> <span class="token number">07</span> <span class="token number">05</span>  


<span class="token comment">;switch函数地址表</span>
012E10E0  <span class="token number">012E1055</span>  rasm<span class="token number">.012E1055</span> <span class="token operator">/</span><span class="token operator">/</span>以下七个函数入口
012E10E4  <span class="token number">012E1045</span>  rasm<span class="token number">.012E1045</span>
012E10E8  <span class="token number">012E1065</span>  rasm<span class="token number">.012E1065</span>
012E10EC  <span class="token number">012E1095</span>  rasm<span class="token number">.012E1095</span>
012E10F0  012E10A5  rasm.012E10A5 <span class="token operator">/</span><span class="token operator">/</span><span class="token number">05</span>函数位移
012E10F4 <span class="token operator">&gt;</span><span class="token number">012E1075</span>  rasm<span class="token number">.012E1075</span>
012E10F8  <span class="token number">012E1085</span>  rasm<span class="token number">.012E1085</span>
012E10FC  012E10B5  rasm.012E10B5   <span class="token operator">/</span><span class="token operator">/</span>default函数





</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/%E6%B1%87%E7%BC%96/" class="prev router-link-active">
        汇编
      </a></span> <span class="next"><a href="/汇编/寄存器.html">
        寄存器
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.9eeb4c04.js" defer></script><script src="/assets/js/2.05f5c699.js" defer></script><script src="/assets/js/78.de45f505.js" defer></script>
  </body>
</html>
